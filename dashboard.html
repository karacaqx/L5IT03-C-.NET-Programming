<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Employee Management System</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }

        .welcome-card {
            background: #4a90e2;
            color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #ddd;
        }
        
        .stats-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 1px solid #ddd;
            margin-bottom: 1rem;
        }
        
        .quick-action-card {
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-users me-2"></i>Employee Management (Student Project)
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="dashboard.html">
                            <i class="fas fa-home me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="employee-management.html">
                            <i class="fas fa-user-edit me-1"></i>Employee Management
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user me-1"></i>
                            <span id="userFullName">User</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="changeTheme()">
                                <i class="fas fa-palette me-1"></i>Change Theme
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-1"></i>Logout
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <div class="fade-in">
            <!-- Welcome Section -->
            <div class="welcome-card">
                <h2>Dashboard - Employee Management System</h2>
                <p class="mb-2">Welcome, <span id="welcomeUser">User</span>!</p>
                <p class="mb-0">
                    Department: <strong><span id="userDepartment">Department</span></strong>
                </p>
            </div>

            <!-- Statistics -->
            <div class="row">
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h4 id="totalEmployees">5</h4>
                        <p class="text-muted mb-0">Total Employees</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h4 id="deptEmployees">2</h4>
                        <p class="text-muted mb-0">Department Employees</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h4 id="newHires">1</h4>
                        <p class="text-muted mb-0">Recent Hires</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <h4 id="avgSalary">$75,000</h4>
                        <p class="text-muted mb-0">Average Salary</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <h4 class="mt-4 mb-3">Quick Actions</h4>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="card quick-action-card">
                        <div class="card-body text-center">
                            <h5>Find Employee</h5>
                            <p>Search employee by ID</p>
                            <button class="btn btn-primary" onclick="goToEmployeeManagement()">
                                Search
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <div class="card quick-action-card">
                        <div class="card-body text-center">
                            <h5>Add Employee</h5>
                            <p>Add new employee</p>
                            <button class="btn btn-success" onclick="addEmployee()">
                                Add New
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <div class="card quick-action-card">
                        <div class="card-body text-center">
                            <h5>View All</h5>
                            <p>View all employees</p>
                            <button class="btn btn-info" onclick="viewAllEmployees()">
                                View All
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="mt-4">
                <h4>Recent Employees</h4>
                <div class="card">
                    <div class="card-body p-0">
                        <table class="table table-striped mb-0" id="recentEmployeesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Position</th>
                                    <th>Department</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Sample employee data
        const employees = [
            {
                employeeId: "EMP001",
                firstName: "John",
                lastName: "Doe",
                email: "john.doe@company.com",
                phone: "+1-555-0123",
                department: "HR",
                position: "HR Manager",
                salary: 75000,
                hireDate: "2022-01-15"
            },
            {
                employeeId: "EMP002",
                firstName: "Jane",
                lastName: "Smith",
                email: "jane.smith@company.com",
                phone: "+1-555-0124",
                department: "IT",
                position: "Software Developer",
                salary: 85000,
                hireDate: "2021-03-22"
            },
            {
                employeeId: "EMP003",
                firstName: "Mike",
                lastName: "Johnson",
                email: "mike.johnson@company.com",
                phone: "+1-555-0125",
                department: "Finance",
                position: "Financial Analyst",
                salary: 70000,
                hireDate: "2022-07-10"
            },
            {
                employeeId: "EMP004",
                firstName: "Sarah",
                lastName: "Wilson",
                email: "sarah.wilson@company.com",
                phone: "+1-555-0126",
                department: "Marketing",
                position: "Marketing Specialist",
                salary: 65000,
                hireDate: "2023-02-14"
            },
            {
                employeeId: "EMP005",
                firstName: "David",
                lastName: "Brown",
                email: "david.brown@company.com",
                phone: "+1-555-0127",
                department: "IT",
                position: "System Administrator",
                salary: 80000,
                hireDate: "2021-11-30"
            }
        ];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!currentUser) {
                window.location.href = 'index.html';
                return;
            }

            // Set user info
            document.getElementById('userFullName').textContent = currentUser.fullName;
            document.getElementById('welcomeUser').textContent = currentUser.fullName;
            document.getElementById('userDepartment').textContent = currentUser.department;

            // Apply theme
            applyTheme(currentUser.department);

            // Load dashboard data
            loadDashboardData(currentUser.department);

            // Load recent employees
            loadRecentEmployees(currentUser.department);
        });

        function applyTheme(department) {
            const body = document.body;
            body.className = 'themed theme-' + department.toLowerCase();
        }

        function loadDashboardData(userDepartment) {
            const deptEmployees = employees.filter(emp => emp.department === userDepartment);
            const totalEmployees = employees.length;
            const recentHires = employees.filter(emp => {
                const hireDate = new Date(emp.hireDate);
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                return hireDate >= thirtyDaysAgo;
            }).length;

            const avgSalary = deptEmployees.length > 0 
                ? deptEmployees.reduce((sum, emp) => sum + emp.salary, 0) / deptEmployees.length
                : 0;

            document.getElementById('totalEmployees').textContent = totalEmployees;
            document.getElementById('deptEmployees').textContent = deptEmployees.length;
            document.getElementById('newHires').textContent = recentHires;
            document.getElementById('avgSalary').textContent = '$' + Math.round(avgSalary).toLocaleString();
        }

        function loadRecentEmployees(userDepartment) {
            const allEmployees = employees.slice(0, 3); // Show first 3 employees for simplicity

            const tbody = document.querySelector('#recentEmployeesTable tbody');
            tbody.innerHTML = '';

            allEmployees.forEach(emp => {
                const row = `
                    <tr>
                        <td>${emp.employeeId}</td>
                        <td>${emp.firstName} ${emp.lastName}</td>
                        <td>${emp.position}</td>
                        <td>${emp.department}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="viewEmployee('${emp.employeeId}')">
                                View
                            </button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function goToEmployeeManagement() {
            window.location.href = 'employee-management.html';
        }

        function addEmployee() {
            alert('Add new employee feature coming soon!');
        }

        function viewAllEmployees() {
            window.location.href = 'employee-management.html?view=all';
        }

        function viewEmployee(employeeId) {
            window.location.href = 'employee-management.html?id=' + employeeId;
        }

        function changeTheme() {
            const themes = ['Default', 'HR', 'IT', 'Finance', 'Marketing'];
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            const themeSelection = prompt(
                'Select theme:\n1. Default (Blue)\n2. HR (Green)\n3. IT (Purple)\n4. Finance (Orange)\n5. Marketing (Pink)\n\nYour choice (1-5):',
                '1'
            );
            
            if (themeSelection && themeSelection >= 1 && themeSelection <= 5) {
                const selectedTheme = themes[themeSelection - 1];
                currentUser.selectedTheme = selectedTheme;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                applyTheme(selectedTheme);
                alert('Theme changed: ' + selectedTheme);
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>